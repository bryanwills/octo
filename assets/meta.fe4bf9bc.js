import{h as l}from"./moment.9709ab41.js";import{_ as g,o as d,c as r,a as t,t as c,R as x,i as M,r as h,d as u,w as b,u as A,U as S,V as T,W as j,M as k,X as B,Y as R,Z as I,$ as L,a0 as U,f as a,P as w,Q as f}from"./index.96bc23b6.js";import{_ as Y}from"./TagLink.deece33f.js";import"./Tag.28061dd6.js";import"./TheLogo.fef09018.js";const E={props:{discardedAt:Date,onDiscard:Function,onRestore:Function},computed:{actionText(){return this.discardedAt?"Restore":"Discard"}},methods:{toggle(){this.discardedAt?this.onRestore():this.onDiscard()}}},N=t("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),H={class:"ml-6 md:ml-3 text-left flex-grow"};function V(n,s,i,m,_,e){return d(),r("button",{class:"flex items-center cursor-pointer",onClick:s[0]||(s[0]=x((...p)=>e.toggle&&e.toggle(...p),["stop"]))},[N,t("div",H,c(e.actionText),1)])}var O=g(E,[["render",V]]);const P=t("svg",{height:"1.25em",width:"1.25em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),$={class:"flex-grow overflow-hidden truncate ml-3"},z=M({__name:"DocLink",props:{doc:null},setup(n){const{doc:s}=n,i=s.headers[0];return(m,_)=>{const e=h("router-link");return d(),u(e,{to:{path:`/docs/${n.doc.id}`},class:"flex items-center"},{default:b(()=>[P,t("span",$,c(A(i)),1)]),_:1},8,["to"])}}}),F=n=>{const s={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({files:n})};return fetch("https://codesandbox.io/api/v1/sandboxes/define?json=1",s).then(i=>i.json()).then(i=>i.sandbox_id)},G=n=>{n&&window.open(`https://codesandbox.io/s/${n}`,"_blank")};var v={create:F,open:G};const J={components:{DiscardableAction:O,DocLink:z,TagLink:Y},data(){return{now:l(),ticker:null}},computed:{codeblocks(){return S(this.doc.text)},createdAt(){return this.$route.params.docId?l(this.doc.createdAt).format("ddd, MMM Do, YYYY [at] h:mm A"):"Not yet created"},discardedAt(){return l(this.doc.discardedAt).format("ddd, MMM Do, YYYY [at] h:mm A")},doc(){return this.$store.getters.currentDoc},hasCodeblocks(){return this.codeblocks.length>0},publicUrl(){const n=this.$router.resolve({path:`/public/${this.doc.id}`}).href;return`${location.protocol}//${location.host}${n}`},references(){const n=T(this.doc.text);return this.$store.getters.kept.filter(s=>n.includes(s.id))},savedAt(){return this.$route.params.docId?this.now.diff(this.doc.updatedAt,"seconds")<5?"just now":`${l(this.doc.updatedAt).from(this.now,!0)} ago`:"Not yet saved"},updatedAt(){return this.$route.params.docId?l(this.doc.updatedAt).format("ddd, MMM Do, YYYY [at] h:mm A"):"Not yet updated"}},methods:{async copyPublicUrl(){this.$refs.link.select(),document.execCommand("copy")},async discardDocument(){this.$store.dispatch(j,{id:this.doc.id}),k({path:"/docs/new"})},async duplicateDocument(){const n=await this.$store.dispatch(B,{id:this.doc.id});k({path:`/docs/${n}`})},async openSandbox(){const n=this.codeblocks.reduce((s,i,m)=>{const _=i.filename||[m,i.language||"txt"].join(".");return{...s,[_]:{content:i.code}}},{});v.create(n).then(s=>v.open(s))},async restoreDocument(){this.$store.dispatch(R,{id:this.doc.id})},async restrictDocument(){this.$store.dispatch(I,{id:this.doc.id})},async shareDocument(){this.$store.dispatch(L,{id:this.doc.id})},async toggleMeta(){this.$store.dispatch(U,!this.$store.state.showRightSidebar)}},async beforeUnmount(){clearInterval(this.ticker)},async mounted(){this.mounted=!0,this.ticker=setInterval(()=>{this.now=l()},5e3)}},Q={class:"flex flex-col flex-grow"},W={class:"hidden mb-4 md:flex justify-end"},X=t("svg",{height:"1.25em",width:"1.25em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Z=t("span",{class:"ml-3"},"Hide",-1),q=[X,Z],K={key:0,class:"flex flex-col flex-grow"},tt=t("svg",{height:"1.25em",width:"1.25em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})],-1),et=t("span",{class:"ml-6 md:ml-3 flex-grow text-left"},"Duplicate",-1),st=[tt,et],ot=t("svg",{height:"1.25em",width:"1.25em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})],-1),dt=t("span",{class:"ml-6 md:ml-3 flex-grow text-left"},"Create Sandbox",-1),nt=[ot,dt],rt={key:0},it=t("svg",{height:"1.25em",width:"1.25em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),at=t("span",{class:"ml-6 md:ml-3 flex-grow text-left"},"Make Private",-1),ct=[it,at],lt=t("svg",{height:"1.25em",width:"1.25em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})],-1),ht=t("span",{class:"ml-6 md:ml-3 flex-grow text-left"},"Copy Link",-1),ut=[lt,ht],mt=["value"],_t={key:1,class:"mb-2"},pt=t("svg",{height:"1.25em",width:"1.25em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"})],-1),wt=t("span",{class:"ml-6 md:ml-3 flex-grow text-left"},"Make Public",-1),ft=[pt,wt],kt={class:"mt-4"},vt={class:"mt-4"},gt={class:"mt-4"},xt={class:"flex items-center px-3 py-2 my-1 md:px-2 md:py-1"},bt=t("svg",{height:"1.25em",width:"1.25em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),yt={class:"flex-grow overflow-hidden truncate ml-3"},Dt={class:"flex flex-col justify-end flex-grow px-3 md:p-2 mt-4 mb-3 md:mb-1"},Ct={key:0},Mt=t("small",{class:"text-gray-700"},"Last Saved",-1),At={class:"capitalize pt-2 md:pt-1"},St={key:1,class:"mt-3 md:mt-2"},Tt=t("small",{class:"text-gray-700"},"Created",-1),jt={class:"pt-2 md:pt-1"},Bt={key:2,class:"mt-3 md:mt-2"},Rt=t("small",{class:"text-gray-700"},"Updated",-1),It={class:"pt-2 md:pt-1"},Lt={key:3,class:"mt-3 md:mt-2"},Ut=t("small",{class:"text-gray-700"},"Discarded",-1),Yt={class:"pt-2 md:pt-1"};function Et(n,s,i,m,_,e){const p=h("DiscardableAction"),y=h("TagLink"),D=h("DocLink"),C=h("SimpleBar");return d(),u(C,{class:"meta p-4 md:p-2"},{default:b(()=>[t("div",Q,[t("div",W,[t("button",{onClick:s[0]||(s[0]=(...o)=>e.toggleMeta&&e.toggleMeta(...o)),class:"sidebar-button"},q)]),e.doc?(d(),r("div",K,[t("div",null,[e.doc.id?(d(),u(p,{key:0,discardedAt:e.doc.discardedAt,onDiscard:e.discardDocument,onRestore:e.restoreDocument,class:"sidebar-button w-full"},null,8,["discardedAt","onDiscard","onRestore"])):a("",!0),t("button",{onClick:s[1]||(s[1]=x((...o)=>e.duplicateDocument&&e.duplicateDocument(...o),["stop"])),class:"sidebar-button w-full"},st),e.hasCodeblocks?(d(),r("button",{key:1,onClick:s[2]||(s[2]=(...o)=>e.openSandbox&&e.openSandbox(...o)),class:"sidebar-button w-full"},nt)):a("",!0),t("div",null,[e.doc.public?(d(),r("div",rt,[t("button",{onClick:s[3]||(s[3]=(...o)=>e.restrictDocument&&e.restrictDocument(...o)),class:"sidebar-button w-full"},ct),t("button",{onClick:s[4]||(s[4]=(...o)=>e.copyPublicUrl&&e.copyPublicUrl(...o)),class:"sidebar-button w-full"},ut),t("input",{ref:"link",value:e.publicUrl,type:"text",class:"form-text w-full mb-2",readonly:""},null,8,mt)])):(d(),r("div",_t,[t("button",{onClick:s[5]||(s[5]=(...o)=>e.shareDocument&&e.shareDocument(...o)),class:"sidebar-button w-full"},ft)]))])]),t("div",kt,[(d(!0),r(w,null,f(e.doc.tags,o=>(d(),u(y,{key:o,tag:o,class:"sidebar-link"},null,8,["tag"]))),128))]),t("div",vt,[(d(!0),r(w,null,f(e.references,o=>(d(),u(D,{key:o.id,doc:o,class:"sidebar-link"},null,8,["doc"]))),128))]),t("div",gt,[(d(!0),r(w,null,f(e.doc.tasks,o=>(d(),r("div",xt,[bt,t("span",yt,c(o),1)]))),256))]),t("div",Dt,[e.doc.updatedAt?(d(),r("div",Ct,[Mt,t("div",At,c(e.savedAt),1)])):a("",!0),e.doc.createdAt?(d(),r("div",St,[Tt,t("div",jt,c(e.createdAt),1)])):a("",!0),e.doc.updatedAt?(d(),r("div",Bt,[Rt,t("div",It,c(e.updatedAt),1)])):a("",!0),e.doc.discardedAt?(d(),r("div",Lt,[Ut,t("div",Yt,c(e.discardedAt),1)])):a("",!0)])])):a("",!0)])]),_:1})}var $t=g(J,[["render",Et]]);export{$t as default};
