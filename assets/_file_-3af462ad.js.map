{"version":3,"file":"_file_-3af462ad.js","sources":["../../pages/file-editor/[file].vue"],"sourcesContent":["<template>\n  <Editor :appearance=\"appearance\" :settings=\"settings\" :doc=\"doc\" @input=\"input\" />\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, ref, watchEffect } from 'vue'\nimport { useStore } from 'vuex'\n\nimport Doc from '/src/models/doc'\nimport Debouncer from '/src/common/debouncer'\nimport Editor from '/components/Editor.vue'\nimport { useFiles } from '/src/stores/useFiles'\n\nconst { id } = defineProps({ id: String })\nconst fileStore = useFiles()\nconst store = useStore()\nconst debouncer = new Debouncer(800)\nconst appearance = computed(() => {\n  if (store.state.settings.theme === 'october') { return 'dark' }\n\n  return store.state.settings.theme as string\n})\nconst settings = computed(() => {\n  return store.state.settings.editor\n})\n\nconst doc = ref(new Doc())\nconst file = computed(() => (fileStore.files.find(file => file.id === id)))\n\nwatchEffect(async () => {\n  if (file?.value) {\n    // @ts-ignore\n    await file.value.handle.createWritable()\n    const fileHandle = await file.value.handle.getFile()\n\n    if (fileHandle) {\n      doc.value.update({ text: await fileHandle.text() })\n    }\n  }\n})\n\nconst input = async (text: string) => {\n  // @ts-ignore\n  debouncer.debounce(file.value.id, async () => {\n    // @ts-ignore\n    const writable = await file.value.handle.createWritable()\n    writable.write(text)\n    writable.close()\n  })\n}\n</script>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAcA,UAAA,YAAA;AACA,UAAA,QAAA;AACA,UAAA,YAAA,IAAA,UAAA,GAAA;AACA,UAAA,aAAA,SAAA,MAAA;AACE,UAAA,MAAA,MAAA,SAAA,UAAA,WAAA;AAAgD,eAAA;AAAA,MAAO;AAEvD,aAAA,MAAA,MAAA,SAAA;AAAA,IAA4B,CAAA;AAE9B,UAAA,WAAA,SAAA,MAAA;AACE,aAAA,MAAA,MAAA,SAAA;AAAA,IAA4B,CAAA;AAG9B,UAAA,MAAA,IAAA,IAAA,IAAA,CAAA;AACA,UAAA,OAAA,SAAA,MAAA,UAAA,MAAA,KAAA,CAAA,UAAA,MAAA,OAAA,EAAA,CAAA;AAEA,gBAAA,YAAA;AACE,UAAA,6BAAA,OAAA;AAEE,cAAA,KAAA,MAAA,OAAA,eAAA;AACA,cAAA,aAAA,MAAA,KAAA,MAAA,OAAA,QAAA;AAEA,YAAA,YAAA;AACE,cAAA,MAAA,OAAA,EAAA,MAAA,MAAA,WAAA,KAAA,EAAA,CAAA;AAAA,QAAkD;AAAA,MACpD;AAAA,IACF,CAAA;AAGF,UAAA,QAAA,OAAA,SAAA;AAEE,gBAAA,SAAA,KAAA,MAAA,IAAA,YAAA;AAEE,cAAA,WAAA,MAAA,KAAA,MAAA,OAAA,eAAA;AACA,iBAAA,MAAA,IAAA;AACA,iBAAA,MAAA;AAAA,MAAe,CAAA;AAAA,IAChB;;;;;;;;;;;"}