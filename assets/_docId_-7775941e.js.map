{"version":3,"file":"_docId_-7775941e.js","sources":["../../pages/public/[docId].vue"],"sourcesContent":["<template>\n  <Editor\n    :appearance=\"appearance\"\n    :doc=\"doc\"\n    :key=\"doc.id\"\n    :ro=\"true\"\n    :settings=\"settings\"\n  />\n</template>\n\n<script>\nimport { defineComponent, inject } from 'vue'\nimport { setTitle } from '/src/common/title'\nimport { fetchSharedDoc } from '/src/firebase/firestore'\nimport Doc, { unpack } from '/src/models/doc'\n\nconst formatTags = (tags, delimiter = ', ') => {\n  return tags.map((tag) => `#${tag}`).join(delimiter)\n}\n\nexport default defineComponent({\n  props: {\n    docId: String,\n  },\n  data() {\n    return {\n      doc: new Doc(),\n    }\n  },\n  setup() {\n    const appearance = inject('appearance')\n\n    return {\n      appearance: appearance.value === 'october' ? 'dark' : appearance.value,\n    }\n  },\n  computed: {\n    settings() {\n      return this.$store.state.settings.editor\n    },\n    header() {\n      return this.doc.headers[0]\n    },\n  },\n  methods: {\n    async findSharedDocument() {\n      // Todo: Provide info to the user about what is happening here. Redirect on error.\n      const packed = await fetchSharedDoc({ docId: this.$route.params.docId })\n\n      return unpack(packed, { privateKey: this.$store.state.settings.crypto.privateKey })\n    },\n    updateTitle() {\n      setTitle(this.header || formatTags(this.doc.tags))\n    },\n  },\n  async mounted() {\n    this.doc = await this.findSharedDocument()\n    this.updateTitle()\n  },\n})\n</script>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAgBA,MAAA,aAAA,CAAA,MAAA,YAAA,SAAA;;AAEA;AAEA,MAAA,YAAA,gBAAA;AAAA,EACE,OAAA;AAAA;;EAGA,OAAA;AACE,WAAA;AAAA;IAEA;AAAA;EAEF,QAAA;AACE,UAAA,aAAA,OAAA,YAAA;AAEA,WAAA;AAAA,MACE,YAAA,WAAA,UAAA,YAAA,SAAA,WAAA;AAAA,IACF;AAAA;EAEF,UAAA;AAAA;AAEI,aAAA,KAAA,OAAA,MAAA,SAAA;AAAA;IAEF,SAAA;;;;EAIF,SAAA;AAAA;AAGI,YAAA,SAAA,MAAA,eAAA,EAAA,OAAA,KAAA,OAAA,OAAA,OAAA;AAEA,aAAA,OAAA,QAAA,EAAA,YAAA,KAAA,OAAA,MAAA,SAAA,OAAA,YAAA;AAAA;;;;;EAMJ,MAAA,UAAA;AACE,SAAA,MAAA,MAAA,KAAA,mBAAA;AACA,SAAA,YAAA;AAAA;AAEJ,CAAA;;;;IAzDK,YAAA,KAAA;AAAA,IACA,KAAA,KAAA;AAAA;IAEA,IAAA;AAAA,IACA,UAAA,KAAA;AAAA;;;"}