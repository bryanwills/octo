var x=Object.defineProperty,k=Object.defineProperties;var y=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var g=(s,e,o)=>e in s?x(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,m=(s,e)=>{for(var o in e||(e={}))b.call(e,o)&&g(s,o,e[o]);if(h)for(var o of h(e))D.call(e,o)&&g(s,o,e[o]);return s},f=(s,e)=>k(s,y(e));import{_ as p,m as M,q as C,R as E,a as n,c as d,e as t,t as u,l as _,V as q,o as S,r as L,f as c,W as V,X as j,F as z,k as R,Y as A,b as B,Z as N,j as T,i as $}from"./index.4d2042ed.js";import{_ as U}from"./Tag.5563b13c.js";const Y={name:"Document",props:{id:String,text:String,updatedAt:Date,discardedAt:Date},computed:{updated(){return`Updated on ${M(this.updatedAt).format("ddd, MMM Do, YYYY [at] h:mm A")}`}},methods:{discard(){this.$store.dispatch(C,{id:this.id})},restore(){this.$store.dispatch(E,{id:this.id})}}},I={class:"shadow relative flex flex-col min-w-0 rounded text-sm overflow-hidden cursor-pointer bg-gray-100 dark:bg-gray-800 dark:text-gray-300"},O={class:"flex-grow flex-shrink overflow-hidden p-4"},F={class:"flex items-center justify-between p-4 bg-gray-200 dark:bg-gray-900"},H={class:"text-gray-500"},K=t("svg",{height:"1.25em",width:"1.25em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),G=t("span",{class:"ml-2"},"Restore",-1),X=[K,G],P=t("svg",{height:"1.25em",width:"1.25em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Q=t("span",{class:"ml-2"},"Discard",-1),W=[P,Q];function Z(s,e,o,v,l,i){return n(),d("div",I,[t("div",O,[t("pre",null,u(o.text),1)]),t("div",F,[t("p",H,u(i.updated),1),t("div",null,[o.discardedAt?(n(),d("button",{key:0,onClick:e[0]||(e[0]=_((...a)=>i.restore&&i.restore(...a),["stop"])),class:"destroy button-flat button-size-medium text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-900 dark:hover:bg-gray-800"},X)):(n(),d("button",{key:1,onClick:e[1]||(e[1]=_((...a)=>i.discard&&i.discard(...a),["stop"])),class:"destroy button-flat button-size-medium text-sm text-red-500 bg-gray-200 dark:bg-gray-900 hover:bg-gray-300 dark:hover:bg-gray-800"},W))])])])}var J=p(Y,[["render",Z]]);const ee=/^\/(?<regex>.+)\/(?<flags>[a-z]*)$/s,te={name:"DocumentList",emits:["update:query"],components:{Document:J,Tag:U},props:{cols:{default:2,type:Number},filter:String,query:String,tag:String},data(){return{isEditing:!1,q:this.query,selectedDocuments:[],visibleCount:25}},watch:{q(s){this.$emit("update:query",s)}},computed:{action(){return this.tag||this.filter||"My docs"},canMerge(){return this.selectedDocuments.length>1},documents(){return this.tag?this.$store.getters.withTag(this.tag):this.filter==="tasks"?this.$store.getters.tasks:this.filter==="discarded"?this.$store.getters.discarded:this.filter==="untagged"?this.$store.getters.untagged:this.$store.getters.kept},filteredDocuments(){return this.documents.filter(s=>{if(!this.q)return!0;try{const{groups:{flags:e,regex:o}}=ee.exec(this.q);return new RegExp(o,e).test(s.text)}catch{return s.text.toLowerCase().includes(this.q.toLowerCase())}})},finalDocuments(){return this.filteredDocuments.map(s=>f(m({},s),{selected:this.selectedDocuments.includes(s)}))},showLoadMore(){return this.visibleCount<=this.finalDocuments.length},visibleDocuments(){return this.finalDocuments.slice(0,this.visibleCount)}},methods:{loadMore(){this.visibleCount+=25},mergeDocuments(){this.$store.dispatch(q,this.selectedDocuments),this.selectedDocuments=[]},toggleIsEditing(){this.isEditing=!this.isEditing,this.isEditing||(this.selectedDocuments=[])},selectDocument(s){this.isEditing?this.selectedDocuments.find(e=>e.id===s)?this.selectedDocuments=this.selectedDocuments.filter(e=>e.id!==s):this.selectedDocuments.push(this.filteredDocuments.find(e=>e.id===s)):S({name:"doc",params:{id:s}})}},mounted(){this.$refs.input.focus()}},se={class:"flex flex-col w-full"},oe=t("h2",{class:"action text-3xl capitalize mb-2"},"My Docs",-1),ie={key:0,class:"flex items-center gap-1 text-gray-500"},re=$(" Filtering docs as "),ne={class:"inline-flex items-center"},de={key:0,class:"inline-flex items-center gap-0.5"},le=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"3"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})],-1),ae={key:1,class:""},ce={class:"mb-4 mt-8"},ue={class:"flex align-items-bottom"},he={class:"flex-grow"},ge={class:"flex"},me={class:"mb-4"},fe={key:0,class:"text-gray-700"},_e=["onKeypress","onClick"],pe={key:0,class:"flex items-center justify-center rounded absolute inset-0 bg-black bg-opacity-10 dark:bg-opacity-50"},ve=t("svg",{height:"3em",width:"3em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),we=[ve],xe={key:0,class:"flex items-center justify-center rounded cursor-pointer"},ke=t("svg",{height:"1.25em",width:"1.25em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),ye=t("span",{class:"ml-3"},"Load More",-1),be=[ke,ye];function De(s,e,o,v,l,i){const a=L("Document");return n(),d("div",se,[oe,o.tag||o.filter?(n(),d("p",ie,[re,t("strong",ne,[o.tag?(n(),d("span",de,[le,t("span",null,u(o.tag),1)])):(n(),d("span",ae,u(o.filter),1))])])):c("",!0),t("div",ce,[t("div",ue,[t("div",he,[t("div",ge,[V(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>l.q=r),ref:"input",type:"text",class:"form-text w-full shadow",placeholder:"Search with /regex/i or plain text...",autocomplete:"off"},null,512),[[j,l.q]])])])])]),t("div",me,[t("button",{onClick:e[1]||(e[1]=(...r)=>i.toggleIsEditing&&i.toggleIsEditing(...r)),class:"button button-size-medium button-color-gray shadow"},u(l.isEditing?"Cancel":"Edit Documents"),1),i.canMerge?(n(),d("button",{key:0,onClick:e[2]||(e[2]=(...r)=>i.mergeDocuments&&i.mergeDocuments(...r)),class:"button button-size-medium button-color-gray shadow ml-2"},"Merge Documents")):c("",!0)]),t("div",null,[l.isEditing?(n(),d("p",fe,"Select two or more documents to merge them together.")):c("",!0)]),t("div",{class:T(["grid gap-4 grid-cols-1",o.cols===2&&"lg:grid-cols-2"])},[(n(!0),d(z,null,R(i.visibleDocuments,r=>(n(),d("div",{key:r.id,onKeypress:A(w=>i.selectDocument(r.id),["enter"]),onClick:w=>i.selectDocument(r.id),tabindex:"0",class:"rounded relative cursor-pointer outline-none focus:ring"},[B(a,N(r,{class:"h-96"}),null,16),r.selected?(n(),d("div",pe,we)):c("",!0)],40,_e))),128)),i.showLoadMore?(n(),d("div",xe,[t("div",{onClick:e[3]||(e[3]=(...r)=>i.loadMore&&i.loadMore(...r)),class:"button button-color-gray text-lg px-8 py-6"},be)])):c("",!0)],2)])}var qe=p(te,[["render",De]]);export{qe as D};
