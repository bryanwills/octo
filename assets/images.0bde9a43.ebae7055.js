var g=Object.defineProperty;var u=(s,i,e)=>i in s?g(s,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[i]=e;var d=(s,i,e)=>(u(s,typeof i!="symbol"?i+"":i,e),e);import{S as p,b as h,s as y,R as f,D as c,W as b}from"./Editor.d552a03c.js";import"./index.d643b7b2.js";import"./account.02cbf4c5.js";class x extends b{constructor({url:e}){super();d(this,"url");this.url=e}eq(e){return e.url===this.url}toDOM(){const e=document.createElement("div"),a=e.appendChild(document.createElement("div")),t=a.appendChild(document.createElement("figure")),r=t.appendChild(document.createElement("img"));return e.setAttribute("aria-hidden","true"),e.className="cm-image-container",a.className="cm-image-backdrop",t.className="cm-image-figure",r.className="cm-image-img",r.src=this.url,e.style.paddingBottom="0.5rem",e.style.paddingTop="0.5rem",a.classList.add("cm-image-backdrop"),a.style.borderRadius="var(--ink-internal-border-radius)",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.overflow="hidden",a.style.maxWidth="100%",t.style.margin="0",r.style.display="block",r.style.maxHeight="var(--ink-internal-block-max-height)",r.style.maxWidth="100%",r.style.width="100%",e}}const E=()=>{const s=/!\[.*?\]\((?<url>.*?)\)/,i=t=>c.widget({widget:new x(t),side:-1,block:!0}),e=t=>{const r=[];return y(t).iterate({enter:({type:l,from:o,to:m})=>{if(l.name==="Image"){const n=s.exec(t.doc.sliceString(o,m));n&&n.groups&&n.groups.url&&r.push(i({url:n.groups.url}).range(t.doc.lineAt(o).from))}}}),r.length>0?f.of(r):c.none};return[p.define({create(t){return e(t)},update(t,r){return r.docChanged?e(r.state):t.map(r.changes)},provide(t){return h.decorations.from(t)}})]};export{E as images};
