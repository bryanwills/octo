{"version":3,"file":"notepad-4c567376.js","sources":["../../pages/notepad.vue"],"sourcesContent":["<template>\n  <Editor v-if=\"daily\" :docId=\"daily.id\" initialFocus=\"end\" />\n</template>\n\n<script>\nimport moment from 'moment'\nimport Editor from '/pages/docs/[doc].vue'\nimport Doc from '/src/models/doc.js'\n\nimport {\n  DOCUMENTS_LOADED,\n  EDIT_DOCUMENT,\n} from '/src/store/actions.js'\n\nexport default {\n  components: {\n    Editor,\n  },\n  computed: {\n    daily() {\n      return this.$store.getters.daily\n    },\n  },\n  methods: {\n    async buildTemplate() {\n      try {\n        const quotes = (await import('/src/data/quotes.json')).default\n        const quote = quotes[Math.floor(Math.random() * quotes.length)]\n\n        return `#daily\\n\\n# ${moment().format('dddd, MMMM Do, YYYY')}\\n\\n> ${quote.text}\\n> ${quote.author || 'Unknown'}\\n\\n`\n      } catch (error) {\n        console.warn({ error })\n\n        return `#daily\\n\\n# ${moment().format('dddd, MMMM Do, YYYY')}\\n\\n`\n      }\n    },\n    async checkDaily() {\n      let cutoff = moment().startOf('day').add(3, 'hours')\n\n      if (moment() < cutoff) {\n        cutoff = cutoff.subtract(1, 'day')\n      }\n\n      if (!this.daily || this.daily.createdAt < cutoff) {\n        const template = await this.buildTemplate()\n        const doc = new Doc({ text: template, daily: true })\n\n        this.$store.commit(EDIT_DOCUMENT, doc)\n      }\n    },\n  },\n  beforeMount() {\n    if (this.$store.state.documents.loaded) {\n      this.checkDaily()\n    } else {\n      this.$store.subscribe(({ type }, _state) => {\n        if (type === DOCUMENTS_LOADED) {\n          this.checkDaily()\n        }\n      })\n    }\n  },\n}\n</script>\n"],"names":["moment"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAcA,MAAA,YAAA;AAAA;IAEI;AAAA;EAEF,UAAA;AAAA,IACE,QAAA;AACE,aAAA,KAAA,OAAA,QAAA;AAAA;;EAGJ,SAAA;AAAA,IACE,MAAA,gBAAA;AACE,UAAA;;;;;;;;;;;;AAME,gBAAA,KAAA,EAAA,OAAA;;;;;;MAGF;AAAA;IAEF,MAAA,aAAA;;AAGE,UAAAA,MAAA,IAAA,QAAA;AACE,iBAAA,OAAA,SAAA,GAAA,KAAA;AAAA,MACF;AAEA,UAAA,CAAA,KAAA,SAAA,KAAA,MAAA,YAAA,QAAA;AACE,cAAA,WAAA,MAAA,KAAA,cAAA;AACA,cAAA,MAAA,IAAA,IAAA,EAAA,MAAA,UAAA,OAAA,MAAA;AAEA,aAAA,OAAA,OAAA,eAAA,GAAA;AAAA,MACF;AAAA;;;AAIF,QAAA,KAAA,OAAA,MAAA,UAAA,QAAA;AACE,WAAA,WAAA;AAAA;AAEA,WAAA,OAAA,UAAA,CAAA,EAAA,KAAA,GAAA,WAAA;;AAEI,eAAA,WAAA;AAAA,QACF;AAAA;IAEJ;AAAA;AAEJ;;;;;;IA7DyC,cAAA;AAAA;;;"}