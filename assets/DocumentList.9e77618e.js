import{_ as g,m as _,q as p,R as v,a as r,c as n,e,t as u,l as h,V as w,o as x,r as k,f as c,W as y,X as b,F as D,k as M,Y as C,b as E,Z as q,j as S,i as L}from"./index.8b417c80.js";import{_ as V}from"./Tag.2022293a.js";const j={name:"Document",props:{id:String,text:String,updatedAt:Date,discardedAt:Date},computed:{updated(){return`Updated on ${_(this.updatedAt).format("ddd, MMM Do, YYYY [at] h:mm A")}`}},methods:{discard(){this.$store.dispatch(p,{id:this.id})},restore(){this.$store.dispatch(v,{id:this.id})}}},z={class:"shadow relative flex flex-col min-w-0 rounded text-sm overflow-hidden cursor-pointer bg-gray-100 dark:bg-gray-800 dark:text-gray-300"},R={class:"flex-grow flex-shrink overflow-hidden p-4"},A={class:"flex items-center justify-between p-4 bg-gray-200 dark:bg-gray-900"},B={class:"text-gray-500"},N=e("svg",{height:"1.25em",width:"1.25em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),T=e("span",{class:"ml-2"},"Restore",-1),$=[N,T],U=e("svg",{height:"1.25em",width:"1.25em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Y=e("span",{class:"ml-2"},"Discard",-1),I=[U,Y];function O(o,t,d,m,l,s){return r(),n("div",z,[e("div",R,[e("pre",null,u(d.text),1)]),e("div",A,[e("p",B,u(s.updated),1),e("div",null,[d.discardedAt?(r(),n("button",{key:0,onClick:t[0]||(t[0]=h((...a)=>s.restore&&s.restore(...a),["stop"])),class:"destroy button-flat button-size-medium text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-900 dark:hover:bg-gray-800"},$)):(r(),n("button",{key:1,onClick:t[1]||(t[1]=h((...a)=>s.discard&&s.discard(...a),["stop"])),class:"destroy button-flat button-size-medium text-sm text-red-500 bg-gray-200 dark:bg-gray-900 hover:bg-gray-300 dark:hover:bg-gray-800"},I))])])])}var F=g(j,[["render",O]]);const H=/^\/(?<regex>.+)\/(?<flags>[a-z]*)$/s,K={name:"DocumentList",emits:["update:query"],components:{Document:F,Tag:V},props:{cols:{default:2,type:Number},filter:String,query:String,tag:String},data(){return{isEditing:!1,q:this.query,selectedDocuments:[],visibleCount:25}},watch:{q(o){this.$emit("update:query",o)}},computed:{action(){return this.tag||this.filter||"My docs"},canMerge(){return this.selectedDocuments.length>1},documents(){return this.tag?this.$store.getters.withTag(this.tag):this.filter==="tasks"?this.$store.getters.tasks:this.filter==="discarded"?this.$store.getters.discarded:this.filter==="untagged"?this.$store.getters.untagged:this.$store.getters.kept},filteredDocuments(){return this.documents.filter(o=>{if(!this.q)return!0;try{const{groups:{flags:t,regex:d}}=H.exec(this.q);return new RegExp(d,t).test(o.text)}catch{return o.text.toLowerCase().includes(this.q.toLowerCase())}})},finalDocuments(){return this.filteredDocuments.map(o=>({...o,selected:this.selectedDocuments.includes(o)}))},showLoadMore(){return this.visibleCount<=this.finalDocuments.length},visibleDocuments(){return this.finalDocuments.slice(0,this.visibleCount)}},methods:{loadMore(){this.visibleCount+=25},mergeDocuments(){this.$store.dispatch(w,this.selectedDocuments),this.selectedDocuments=[]},toggleIsEditing(){this.isEditing=!this.isEditing,this.isEditing||(this.selectedDocuments=[])},selectDocument(o){this.isEditing?this.selectedDocuments.find(t=>t.id===o)?this.selectedDocuments=this.selectedDocuments.filter(t=>t.id!==o):this.selectedDocuments.push(this.filteredDocuments.find(t=>t.id===o)):x({name:"doc",params:{id:o}})}},mounted(){this.$refs.input.focus()}},G={class:"flex flex-col w-full"},X=e("h2",{class:"action text-3xl capitalize mb-2"},"My Docs",-1),P={key:0,class:"flex items-center gap-1 text-gray-500"},Q=L(" Filtering docs as "),W={class:"inline-flex items-center"},Z={key:0,class:"inline-flex items-center gap-0.5"},J=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"3"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})],-1),ee={key:1,class:""},te={class:"mb-4 mt-8"},se={class:"flex align-items-bottom"},oe={class:"flex-grow"},ie={class:"flex"},re={class:"mb-4"},ne={key:0,class:"text-gray-700"},de=["onKeypress","onClick"],le={key:0,class:"flex items-center justify-center rounded absolute inset-0 bg-black bg-opacity-10 dark:bg-opacity-50"},ae=e("svg",{height:"3em",width:"3em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),ce=[ae],ue={key:0,class:"flex items-center justify-center rounded cursor-pointer"},he=e("svg",{height:"1.25em",width:"1.25em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),ge=e("span",{class:"ml-3"},"Load More",-1),me=[he,ge];function fe(o,t,d,m,l,s){const a=k("Document");return r(),n("div",G,[X,d.tag||d.filter?(r(),n("p",P,[Q,e("strong",W,[d.tag?(r(),n("span",Z,[J,e("span",null,u(d.tag),1)])):(r(),n("span",ee,u(d.filter),1))])])):c("",!0),e("div",te,[e("div",se,[e("div",oe,[e("div",ie,[y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>l.q=i),ref:"input",type:"text",class:"form-text w-full shadow",placeholder:"Search with /regex/i or plain text...",autocomplete:"off"},null,512),[[b,l.q]])])])])]),e("div",re,[e("button",{onClick:t[1]||(t[1]=(...i)=>s.toggleIsEditing&&s.toggleIsEditing(...i)),class:"button button-size-medium button-color-gray shadow"},u(l.isEditing?"Cancel":"Edit Documents"),1),s.canMerge?(r(),n("button",{key:0,onClick:t[2]||(t[2]=(...i)=>s.mergeDocuments&&s.mergeDocuments(...i)),class:"button button-size-medium button-color-gray shadow ml-2"},"Merge Documents")):c("",!0)]),e("div",null,[l.isEditing?(r(),n("p",ne,"Select two or more documents to merge them together.")):c("",!0)]),e("div",{class:S(["grid gap-4 grid-cols-1",d.cols===2&&"lg:grid-cols-2"])},[(r(!0),n(D,null,M(s.visibleDocuments,i=>(r(),n("div",{key:i.id,onKeypress:C(f=>s.selectDocument(i.id),["enter"]),onClick:f=>s.selectDocument(i.id),tabindex:"0",class:"rounded relative cursor-pointer outline-none focus:ring"},[E(a,q(i,{class:"h-96"}),null,16),i.selected?(r(),n("div",le,ce)):c("",!0)],40,de))),128)),s.showLoadMore?(r(),n("div",ue,[e("div",{onClick:t[3]||(t[3]=(...i)=>s.loadMore&&s.loadMore(...i)),class:"button button-color-gray text-lg px-8 py-6"},me)])):c("",!0)],2)])}var ve=g(K,[["render",fe]]);export{ve as D};
